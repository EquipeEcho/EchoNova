<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico de Dimens√µes com Relat√≥rio</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 2em;
            background-color: #f4f7f9;
            color: #333;
            transition: background-color 0.5s;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2em;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
            border-bottom: 2px solid #e1e8f0;
            padding-bottom: 10px;
        }
        fieldset {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 1.5em;
            margin-bottom: 2em;
            background-color: #fdfdfd;
        }
        legend {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            padding: 0 10px;
        }
        .question-block {
            margin-bottom: 2em;
            padding-left: 1em;
            border-left: 3px solid #e1e8f0;
        }
        label { display: block; font-weight: bold; margin-bottom: 0.75em; }
        .radio-group label, .checkbox-group label {
            display: flex; align-items: center; font-weight: normal; margin-bottom: 0.5em; cursor: pointer;
        }
        input[type="radio"], input[type="checkbox"] {
            margin-right: 12px; transform: scale(1.1);
        }
        .dimension-questions {
            display: none; margin-top: 2em; animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .submit-button {
            display: block; width: 100%; padding: 15px; background-color: #27ae60;
            color: white; border: none; border-radius: 5px; font-size: 1.2em; cursor: pointer;
            transition: background-color 0.3s;
        }
        .submit-button:hover { background-color: #229954; }
        .alert-box {
            display: none; padding: 1em; margin-bottom: 1.5em; background-color: #e74c3c;
            color: white; border-radius: 5px; text-align: center;
        }
        /* --- Estilos do Relat√≥rio --- */
        #report-section { display: none; }
        .report-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2em; margin-top: 1.5em; }
        .report-card { background-color: #f8f9fa; border-radius: 8px; padding: 1.5em; border: 1px solid #e1e8f0; }
        .report-card h3 { margin-top: 0; }
        .dimension-bar { margin-bottom: 1em; }
        .dimension-bar-label { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 5px; }
        .bar-container { background-color: #e9ecef; border-radius: 5px; overflow: hidden; }
        .bar-fill {
            height: 20px; border-radius: 5px; color: white; text-align: right; padding-right: 5px;
            font-size: 0.8em; line-height: 20px;
            transition: width 1s ease-in-out;
        }
        .stage-1 { background-color: #e74c3c; } /* Inicial */
        .stage-2 { background-color: #f39c12; } /* B√°sico */
        .stage-3 { background-color: #3498db; } /* Intermedi√°rio */
        .stage-4 { background-color: #27ae60; } /* Avan√ßado */
        #trilhas-list { list-style-type: 'üí°'; padding-left: 20px; }
        #trilhas-list li { margin-bottom: 10px; padding-left: 10px; }
    </style>
</head>
<body>
    <div id="form-container" class="container">
        <h1>Diagn√≥stico de Dimens√µes</h1>
        <p>Escolha at√© 3 dimens√µes para analisar, responda √†s perguntas e veja o relat√≥rio completo da sua organiza√ß√£o.</p>

        <form id="diagnosticoForm">
            <fieldset>
                <legend>1. Sele√ß√£o de Dimens√µes</legend>
                <p>Escolha at√© 3 dimens√µes que voc√™ deseja analisar.</p>
                <div class="alert-box" id="selection-alert">Voc√™ s√≥ pode escolher no m√°ximo 3 dimens√µes.</div>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="dimensao" value="pessoas"> Pessoas & Cultura</label>
                    <label><input type="checkbox" name="dimensao" value="estrutura"> Estrutura & Opera√ß√µes</label>
                    <label><input type="checkbox" name="dimensao" value="mercado"> Mercado & Clientes</label>
                    <label><input type="checkbox" name="dimensao" value="direcao"> Dire√ß√£o & Futuro</label>
                </div>
            </fieldset>
            
            <div class="alert-box" id="validation-alert">Por favor, responda todas as perguntas das dimens√µes selecionadas.</div>

            <div id="pessoas-questions" class="dimension-questions">
                <fieldset>
                    <legend>Dimens√£o: Pessoas & Cultura</legend>
                    <div class="question-block"><label>1. Comunica√ß√£o Interna:</label><div class="radio-group">
                        <label><input type="radio" name="p_q1" value="1"> Inexistente ou muito problem√°tica.</label>
                        <label><input type="radio" name="p_q1" value="2"> Fr√°gil, dependente de canais informais.</label>
                        <label><input type="radio" name="p_q1" value="3"> Boa, mas com falhas pontuais de alinhamento.</label>
                        <label><input type="radio" name="p_q1" value="4"> Pr√°tica avan√ßada, com canais claros e escuta ativa.</label>
                    </div></div>
                    <div class="question-block"><label>2. Estilo de Lideran√ßa:</label><div class="radio-group">
                        <label><input type="radio" name="p_q2" value="1"> Autocr√°tico e desmotivador.</label>
                        <label><input type="radio" name="p_q2" value="2"> Centralizador, com pouca delega√ß√£o.</label>
                        <label><input type="radio" name="p_q2" value="3"> Participativo, mas inconsistente entre l√≠deres.</label>
                        <label><input type="radio" name="p_q2" value="4"> Inspirador, focado no desenvolvimento e autonomia.</label>
                    </div></div>
                    <div class="question-block"><label>3. Resolu√ß√£o de Problemas:</label><div class="radio-group">
                        <label><input type="radio" name="p_q3" value="1"> Novas ideias s√£o desencorajadas ou ignoradas.</label>
                        <label><input type="radio" name="p_q3" value="2"> A resolu√ß√£o √© reativa e focada em poucas pessoas.</label>
                        <label><input type="radio" name="p_q3" value="3"> H√° incentivo, mas sem um processo estruturado.</label>
                        <label><input type="radio" name="p_q3" value="4"> A cultura de inova√ß√£o √© forte e todos contribuem.</label>
                    </div></div>
                    <div class="question-block"><label>4. Organiza√ß√£o do Trabalho:</label><div class="radio-group">
                        <label><input type="radio" name="p_q4" value="1"> O trabalho √© desorganizado e as prioridades s√£o confusas.</label>
                        <label><input type="radio" name="p_q4" value="2"> Dependente de microgerenciamento para funcionar.</label>
                        <label><input type="radio" name="p_q4" value="3"> A maioria das equipes √© organizada, mas algumas t√™m dificuldades.</label>
                        <label><input type="radio" name="p_q4" value="4"> Alta autonomia e autogest√£o com foco em resultados.</label>
                    </div></div>
                    <div class="question-block"><label>5. Valores e Prop√≥sito:</label><div class="radio-group">
                        <label><input type="radio" name="p_q5" value="1"> Os valores s√£o apenas decorativos e n√£o s√£o praticados.</label>
                        <label><input type="radio" name="p_q5" value="2"> Apenas uma parte da lideran√ßa demonstra os valores.</label>
                        <label><input type="radio" name="p_q5" value="3"> Os valores s√£o conhecidos, mas nem sempre aplicados.</label>
                        <label><input type="radio" name="p_q5" value="4"> O prop√≥sito e os valores guiam todas as a√ß√µes e decis√µes.</label>
                    </div></div>
                    <div class="question-block"><label>6. Ferramentas de Apoio (Pessoas):</label><div class="radio-group">
                        <label><input type="radio" name="p_q6" value="1"> Ferramentas inexistentes ou obsoletas.</label>
                        <label><input type="radio" name="p_q6" value="2"> Existem, mas s√£o complexas e pouco utilizadas.</label>
                        <label><input type="radio" name="p_q6" value="3"> Boas ferramentas, mas falta treinamento para uso pleno.</label>
                        <label><input type="radio" name="p_q6" value="4"> Ferramentas modernas e integradas, essenciais para a cultura.</label>
                    </div></div>
                </fieldset>
            </div>
            <div id="estrutura-questions" class="dimension-questions">
                <fieldset>
                    <legend>Dimens√£o: Estrutura & Opera√ß√µes</legend>
                    <div class="question-block"><label>1. Fluxo de Informa√ß√£o entre Processos:</label><div class="radio-group">
                        <label><input type="radio" name="e_q1" value="1"> A comunica√ß√£o √© isolada (silos) e cheia de ru√≠dos.</label>
                        <label><input type="radio" name="e_q1" value="2"> A informa√ß√£o depende de pessoas, gerando gargalos.</label>
                        <label><input type="radio" name="e_q1" value="3"> Existe um fluxo definido, mas ainda ocorrem falhas.</label>
                        <label><input type="radio" name="e_q1" value="4"> A informa√ß√£o √© transparente, acess√≠vel e flui de forma integrada.</label>
                    </div></div>
                    <div class="question-block"><label>2. Gest√£o de Processos:</label><div class="radio-group">
                        <label><input type="radio" name="e_q2" value="1"> Processos n√£o s√£o gerenciados, o caos predomina.</label>
                        <label><input type="radio" name="e_q2" value="2"> O controle √© reativo, focado apenas em apagar inc√™ndios.</label>
                        <label><input type="radio" name="e_q2" value="3"> H√° gest√£o de processos, mas sem foco em melhoria cont√≠nua.</label>
                        <label><input type="radio" name="e_q2" value="4"> Lideran√ßa proativa, com processos otimizados e baseados em dados.</label>
                    </div></div>
                    <div class="question-block"><label>3. Otimiza√ß√£o de Processos (Criatividade):</label><div class="radio-group">
                        <label><input type="radio" name="e_q3" value="1"> "Sempre foi feito assim" √© a mentalidade dominante.</label>
                        <label><input type="radio" name="e_q3" value="2"> Melhorias ocorrem, mas apenas por iniciativa da alta gest√£o.</label>
                        <label><input type="radio" name="e_q3" value="3"> Sugest√µes s√£o bem-vindas, mas raramente implementadas.</label>
                        <label><input type="radio" name="e_q3" value="4"> Melhoria cont√≠nua √© um valor, com canais para sugest√µes.</label>
                    </div></div>
                    <div class="question-block"><label>4. Clareza de Processos (Autogest√£o):</label><div class="radio-group">
                        <label><input type="radio" name="e_q4" value="1"> Processos n√£o documentados, dependentes do conhecimento individual.</label>
                        <label><input type="radio" name="e_q4" value="2"> Documentados, mas complexos ou desatualizados.</label>
                        <label><input type="radio" name="e_q4" value="3"> Claros para tarefas rotineiras, mas n√£o para exce√ß√µes.</label>
                        <label><input type="radio" name="e_q4" value="4"> Processos simples e acess√≠veis, permitindo alta autonomia.</label>
                    </div></div>
                    <div class="question-block"><label>5. Cultura de Efici√™ncia:</label><div class="radio-group">
                        <label><input type="radio" name="e_q5" value="1"> A cultura valoriza a burocracia e o esfor√ßo, n√£o o resultado.</label>
                        <label><input type="radio" name="e_q5" value="2"> A estrutura cria silos e competi√ß√£o interna.</label>
                        <label><input type="radio" name="e_q5" value="3"> H√° esfor√ßo para colabora√ß√£o, mas a estrutura ainda √© um obst√°culo.</label>
                        <label><input type="radio" name="e_q5" value="4"> A estrutura √© √°gil e a cultura √© voltada √† efici√™ncia colaborativa.</label>
                    </div></div>
                    <div class="question-block"><label>6. Infraestrutura de TI:</label><div class="radio-group">
                        <label><input type="radio" name="e_q6" value="1"> Sistemas inst√°veis e inadequados.</label>
                        <label><input type="radio" name="e_q6" value="2"> Funcionam, mas s√£o legados e geram muito trabalho manual.</label>
                        <label><input type="radio" name="e_q6" value="3"> S√£o adequados, mas n√£o se integram bem entre si.</label>
                        <label><input type="radio" name="e_q6" value="4"> Infraestrutura moderna, integrada e que habilita a efici√™ncia.</label>
                    </div></div>
                </fieldset>
            </div>
            <div id="mercado-questions" class="dimension-questions">
                <fieldset>
                    <legend>Dimens√£o: Mercado & Clientes</legend>
                    <div class="question-block"><label>1. Comunica√ß√£o com Clientes:</label><div class="radio-group">
                        <label><input type="radio" name="m_q1" value="1"> A comunica√ß√£o √© unilateral e pouco frequente.</label>
                        <label><input type="radio" name="m_q1" value="2"> Coletamos feedback, mas de forma passiva (s√≥ quando reclamam).</label>
                        <label><input type="radio" name="m_q1" value="3"> Existem canais de comunica√ß√£o, mas o feedback n√£o √© usado estrategicamente.</label>
                        <label><input type="radio" name="m_q1" value="4"> A voz do cliente (VoC) √© uma pr√°tica central, com m√∫ltiplos canais e a√ß√µes.</label>
                    </div></div>
                    <div class="question-block"><label>2. Vis√£o de Mercado (Lideran√ßa):</label><div class="radio-group">
                        <label><input type="radio" name="m_q2" value="1"> A lideran√ßa tem uma vis√£o reativa e focada apenas na concorr√™ncia direta.</label>
                        <label><input type="radio" name="m_q2" value="2"> A vis√£o de mercado √© pouco clara e n√£o compartilhada com a equipe.</label>
                        <label><input type="radio" name="m_q2" value="3"> H√° uma boa compreens√£o do mercado atual, mas pouca vis√£o de futuro.</label>
                        <label><input type="radio" name="m_q2" value="4"> Lideran√ßa com vis√£o de futuro, que antecipa tend√™ncias e necessidades dos clientes.</label>
                    </div></div>
                    <div class="question-block"><label>3. Adapta√ß√£o ao Mercado (Criatividade):</label><div class="radio-group">
                        <label><input type="radio" name="m_q3" value="1"> A empresa √© lenta e resistente a mudan√ßas nas demandas do mercado.</label>
                        <label><input type="radio" name="m_q3" value="2"> As adapta√ß√µes s√£o lentas e ocorrem apenas em resposta a grandes perdas.</label>
                        <label><input type="radio" name="m_q3" value="3"> A empresa se adapta, mas com dificuldade e de forma n√£o estruturada.</label>
                        <label><input type="radio" name="m_q3" value="4"> Agilidade e inova√ß√£o s√£o pilares para responder rapidamente ao mercado.</label>
                    </div></div>
                    <div class="question-block"><label>4. Autonomia da Linha de Frente:</label><div class="radio-group">
                        <label><input type="radio" name="m_q4" value="1"> As equipes de frente n√£o t√™m autonomia para resolver problemas dos clientes.</label>
                        <label><input type="radio" name="m_q4" value="2"> A autonomia √© limitada e requer aprova√ß√µes para quase tudo.</label>
                        <label><input type="radio" name="m_q4" value="3"> Existe autonomia para problemas simples, mas n√£o para casos complexos.</label>
                        <label><input type="radio" name="m_q4" value="4"> As equipes s√£o empoderadas para resolver problemas e encantar os clientes.</label>
                    </div></div>
                    <div class="question-block"><label>5. Cultura Focada no Cliente:</label><div class="radio-group">
                        <label><input type="radio" name="m_q5" value="1"> O foco da cultura √© interno, no produto ou nos processos.</label>
                        <label><input type="radio" name="m_q5" value="2"> O cliente √© importante, mas as decis√µes priorizam a conveni√™ncia interna.</label>
                        <label><input type="radio" name="m_q5" value="3"> H√° uma forte inten√ß√£o de foco no cliente, mas nem todas as √°reas praticam.</label>
                        <label><input type="radio" name="m_q5" value="4"> "Customer-centricity" √© um valor central, guiando decis√µes em toda a empresa.</label>
                    </div></div>
                    <div class="question-block"><label>6. Ferramentas de Mercado (CRM, Analytics):</label><div class="radio-group">
                        <label><input type="radio" name="m_q6" value="1"> N√£o usamos ferramentas para gerenciar o relacionamento com clientes.</label>
                        <label><input type="radio"name="m_q6" value="2"> As ferramentas s√£o b√°sicas (ex: planilhas) e descentralizadas.</label>
                        <label><input type="radio" name="m_q6" value="3"> Usamos um CRM, mas de forma subutilizada ou apenas pela equipe de vendas.</label>
                        <label><input type="radio" name="m_q6" value="4"> Ferramentas de CRM e Analytics s√£o integradas e geram insights estrat√©gicos.</label>
                    </div></div>
                </fieldset>
            </div>
            <div id="direcao-questions" class="dimension-questions">
                <fieldset>
                    <legend>Dimens√£o: Dire√ß√£o & Futuro</legend>
                    <div class="question-block"><label>1. Comunica√ß√£o da Estrat√©gia:</label><div class="radio-group">
                        <label><input type="radio" name="d_q1" value="1"> A estrat√©gia da empresa √© desconhecida pela maioria dos colaboradores.</label>
                        <label><input type="radio" name="d_q1" value="2"> A estrat√©gia √© comunicada apenas para o n√≠vel de gest√£o.</label>
                        <label><input type="radio" name="d_q1" value="3"> Comunicada a todos, mas de forma espor√°dica e sem clareza de como contribuir.</label>
                        <label><input type="radio" name="d_q1" value="4"> A estrat√©gia √© clara, constantemente refor√ßada e conectada ao trabalho de todos.</label>
                    </div></div>
                    <div class="question-block"><label>2. Lideran√ßa Estrat√©gica:</label><div class="radio-group">
                        <label><input type="radio" name="d_q2" value="1"> A lideran√ßa foca apenas no operacional e apaga inc√™ndios do dia a dia.</label>
                        <label><input type="radio" name="d_q2" value="2"> A dire√ß√£o estrat√©gica muda com frequ√™ncia, gerando inseguran√ßa.</label>
                        <label><input type="radio" name="d_q2" value="3"> A lideran√ßa tem uma vis√£o de futuro, mas dificuldade em execut√°-la.</label>
                        <label><input type="radio" name="d_q2" value="4"> A lideran√ßa inspira confian√ßa com uma vis√£o clara e um plano de execu√ß√£o s√≥lido.</label>
                    </div></div>
                    <div class="question-block"><label>3. Inova√ß√£o e Tend√™ncias:</label><div class="radio-group">
                        <label><input type="radio" name="d_q3" value="1"> A empresa ignora tend√™ncias e n√£o tem pr√°ticas de inova√ß√£o.</label>
                        <label><input type="radio" name="d_q3" value="2"> A inova√ß√£o √© um discurso, mas n√£o h√° investimento ou a√ß√£o pr√°tica.</label>
                        <label><input type="radio" name="d_q3" value="3"> Existem projetos de inova√ß√£o isolados, mas n√£o uma estrat√©gia.</label>
                        <label><input type="radio" name="d_q3" value="4"> A prospec√ß√£o de tend√™ncias e a inova√ß√£o s√£o processos estrat√©gicos cont√≠nuos.</label>
                    </div></div>
                    <div class="question-block"><label>4. Desdobramento de Metas:</label><div class="radio-group">
                        <label><input type="radio" name="d_q4" value="1"> As metas estrat√©gicas n√£o s√£o desdobradas em metas t√°ticas ou operacionais.</label>
                        <label><input type="radio" name="d_q4" value="2"> As metas individuais n√£o t√™m conex√£o clara com a estrat√©gia da empresa.</label>
                        <label><input type="radio" name="d_q4" value="3"> O desdobramento existe, mas as equipes t√™m dificuldade em acompanhar seu progresso.</label>
                        <label><input type="radio" name="d_q4" value="4"> As metas s√£o desdobradas em cascata (OKRs, etc.) e todos sabem sua contribui√ß√£o.</label>
                    </div></div>
                    <div class="question-block"><label>5. Alinhamento com o Prop√≥sito:</label><div class="radio-group">
                        <label><input type="radio" name="d_q5" value="1"> A vis√£o de futuro foca apenas em metas financeiras, ignorando o prop√≥sito.</label>
                        <label><input type="radio" name="d_q5" value="2"> O prop√≥sito existe, mas n√£o est√° conectado √† estrat√©gia de longo prazo.</label>
                        <label><input type="radio" name="d_q5" value="3"> H√° uma tentativa de alinhar prop√≥sito e estrat√©gia, mas ainda √© um discurso.</label>
                        <label><input type="radio" name="d_q5" value="4"> O prop√≥sito √© o pilar central que guia a vis√£o de futuro e a estrat√©gia da empresa.</label>
                    </div></div>
                    <div class="question-block"><label>6. Prepara√ß√£o Tecnol√≥gica:</label><div class="radio-group">
                        <label><input type="radio" name="d_q6" value="1"> A empresa n√£o investe em tecnologia pensando no futuro.</label>
                        <label><input type="radio" name="d_q6" value="2"> Investimentos s√£o reativos, apenas para substituir o que est√° obsoleto.</label>
                        <label><input type="radio" name="d_q6" value="3"> H√° investimento em novas tecnologias, mas sem um plano estrat√©gico claro.</label>
                        <label><input type="radio" name="d_q6" value="4"> A empresa investe estrategicamente em tecnologias que a preparam para o futuro.</label>
                    </div></div>
                </fieldset>
            </div>

            <button type="submit" class="submit-button">Finalizar e Gerar Relat√≥rio</button>
        </form>
    </div>

    <div id="report-section" class="container">
        <h1>Relat√≥rio de Diagn√≥stico</h1>
        
        <div id="report-summary-text"></div>
        
        <div class="report-grid">
            <div class="report-card">
                <h3>Radar das Dimens√µes</h3>
                <div id="radar-chart"></div>
            </div>
            <div class="report-card">
                <h3>Resumo Executivo</h3>
                <div id="executive-summary"></div>
            </div>
        </div>

        <div class="report-card" style="margin-top: 2em;">
            <h3>Trilhas de Melhoria Sugeridas</h3>
            <p>Com base nas respostas de menor pontua√ß√£o, estas s√£o as √°reas priorit√°rias para desenvolvimento:</p>
            <ul id="trilhas-list"></ul>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('diagnosticoForm');
            const checkboxes = document.querySelectorAll('input[name="dimensao"]');
            const maxAllowed = 3;
            
            const dimensionData = {
                pessoas: { name: "Pessoas & Cultura", prefix: "p" },
                estrutura: { name: "Estrutura & Opera√ß√µes", prefix: "e" },
                mercado: { name: "Mercado & Clientes", prefix: "m" },
                direcao: { name: "Dire√ß√£o & Futuro", prefix: "d" },
            };
            
            const trilhasMap = {
                q1: { meta: 'Comunica√ß√£o', trilha: 'Desenvolver pr√°ticas de feedback, escuta ativa e comunica√ß√£o transparente entre √°reas.' },
                q2: { meta: 'Lideran√ßa', trilha: 'Capacitar l√≠deres em delega√ß√£o, engajamento de equipes e desenvolvimento de pessoas.' },
                q3: { meta: 'Criatividade', trilha: 'Implementar processos de brainstorming, design thinking e cultura de inova√ß√£o incremental.' },
                q4: { meta: 'Autogest√£o', trilha: 'Promover treinamentos em gest√£o de tempo, prioriza√ß√£o de tarefas e metodologias √°geis.' },
                q5: { meta: 'Cultura & Valores', trilha: 'Refor√ßar o prop√≥sito e os valores da empresa em rituais, decis√µes e comunica√ß√£o interna.' },
                q6: { meta: 'Ferramentas', trilha: 'Avaliar e investir em ferramentas (LMS, CRM, ERP) que suportem a colabora√ß√£o e a efici√™ncia.' },
            };

            // --- L√≥gica de Sele√ß√£o de Dimens√µes ---
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checkedCount = document.querySelectorAll('input[name="dimensao"]:checked').length;
                    
                    if (checkedCount > maxAllowed) {
                        this.checked = false;
                        showAlert('selection-alert');
                        return;
                    }
                    
                    const questionBlock = document.getElementById(this.value + '-questions');
                    questionBlock.style.display = this.checked ? 'block' : 'none';
                });
            });

            // --- L√≥gica de Submiss√£o do Formul√°rio e Gera√ß√£o do Relat√≥rio ---
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                
                const selectedDimensions = document.querySelectorAll('input[name="dimensao"]:checked');
                
                if (selectedDimensions.length === 0) {
                    showAlert('validation-alert', 'Selecione pelo menos uma dimens√£o para continuar.');
                    return;
                }

                let results = [];
                let allValid = true;

                selectedDimensions.forEach(cb => {
                    const dimKey = cb.value;
                    const prefix = dimensionData[dimKey].prefix;
                    let totalScore = 0;
                    let questionCount = 0;
                    let lowestScore = { value: 5, question: '' };

                    for (let i = 1; i <= 6; i++) {
                        const questionName = `${prefix}_q${i}`;
                        const selectedAnswer = document.querySelector(`input[name="${questionName}"]:checked`);
                        
                        if (selectedAnswer) {
                            const score = parseInt(selectedAnswer.value, 10);
                            totalScore += score;
                            questionCount++;
                            if (score < lowestScore.value) {
                                lowestScore.value = score;
                                lowestScore.question = `q${i}`;
                            }
                        }
                    }

                    if (questionCount < 6) {
                        allValid = false;
                    } else {
                        const average = totalScore / 6;
                        results.push({
                            key: dimKey,
                            name: dimensionData[dimKey].name,
                            average: average,
                            lowestScoreTrilha: trilhasMap[lowestScore.question]
                        });
                    }
                });

                if (!allValid) {
                    showAlert('validation-alert');
                    return;
                }
                
                renderReport(results);
            });

            function renderReport(results) {
                document.getElementById('form-container').style.display = 'none';
                document.getElementById('report-section').style.display = 'block';
                window.scrollTo(0, 0);

                const radarContainer = document.getElementById('radar-chart');
                const summaryContainer = document.getElementById('report-summary-text');
                const trilhasContainer = document.getElementById('trilhas-list');
                const executiveContainer = document.getElementById('executive-summary');

                radarContainer.innerHTML = '';
                summaryContainer.innerHTML = '';
                trilhasContainer.innerHTML = '';
                executiveContainer.innerHTML = '';
                
                results.sort((a, b) => b.average - a.average); // Ordena do maior para o menor
                const forcaMaior = results[0];
                const fragilidadeMaior = results[results.length - 1];

                results.forEach(res => {
                    const { stage, stageClass } = getStageInfo(res.average);
                    
                    // Radar Chart (Barras)
                    const barHtml = `
                        <div class="dimension-bar">
                            <div class="dimension-bar-label">
                                <span>${res.name}</span>
                                <span>${res.average.toFixed(1)} / 4.0</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar-fill ${stageClass}" style="width: ${ (res.average / 4) * 100 }%;">
                                    ${stage}
                                </div>
                            </div>
                        </div>
                    `;
                    radarContainer.innerHTML += barHtml;

                    // Texto por Dimens√£o
                    summaryContainer.innerHTML += `<p>Sua empresa est√° em n√≠vel <strong>${stage}</strong> em <strong>${res.name}</strong>.</p>`;
                    
                    // Trilhas de Melhoria
                    const trilhaItem = document.createElement('li');
                    trilhaItem.innerHTML = `<strong>${res.name} (Meta: ${res.lowestScoreTrilha.meta}):</strong> ${res.lowestScoreTrilha.trilha}`;
                    trilhasContainer.appendChild(trilhaItem);
                });
                
                // Resumo Executivo
                executiveContainer.innerHTML = `
                    <p><strong>For√ßa Maior:</strong> Sua maturidade em <strong>${forcaMaior.name}</strong> (${getStageInfo(forcaMaior.average).stage}) √© um ponto de destaque. Utilize as boas pr√°ticas desta √°rea como inspira√ß√£o para as demais.</p>
                    <p><strong>Fragilidade Maior:</strong> A dimens√£o <strong>${fragilidadeMaior.name}</strong> (${getStageInfo(fragilidadeMaior.average).stage}) requer aten√ß√£o priorit√°ria. As trilhas de melhoria sugeridas para esta √°rea devem ser o foco inicial de a√ß√£o.</p>
                `;
            }

            function getStageInfo(average) {
                if (average >= 3.5) return { stage: 'Avan√ßado', stageClass: 'stage-4' };
                if (average >= 2.5) return { stage: 'Intermedi√°rio', stageClass: 'stage-3' };
                if (average >= 2.0) return { stage: 'B√°sico', stageClass: 'stage-2' };
                return { stage: 'Inicial', stageClass: 'stage-1' };
            }
            
            function showAlert(elementId, message = '') {
                const alertBox = document.getElementById(elementId);
                if (message) alertBox.textContent = message;
                alertBox.style.display = 'block';
                setTimeout(() => { alertBox.style.display = 'none'; }, 3000);
            }
        });
    </script>
</body>
</html>